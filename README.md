# Data Vault –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è E-commerce

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–º Data Vault 2.0 –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

- **data_vault_design.md** - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Data Vault —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:
  - –û–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Hubs (—Ö–∞–±–æ–≤)
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Links (—Å–≤—è–∑–µ–π)
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Satellites (—Å–∞—Ç–µ–ª–ª–∏—Ç–æ–≤)
  - –î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
  - –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- **greenplum_ddl.sql** - SQL DDL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ –°–£–ë–î Greenplum:
  - –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö Hub —Ç–∞–±–ª–∏—Ü
  - –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö Link —Ç–∞–±–ª–∏—Ü
  - –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö Satellite —Ç–∞–±–ª–∏—Ü
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ö–µ—à–∞–º–∏
  - –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–ª–æ—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Data Vault

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Data Vault 2.0 —Å —Ç—Ä–µ–º—è —Ç–∏–ø–∞–º–∏ —Ç–∞–±–ª–∏—Ü:

### Hubs (–•–∞–±—ã)
- `hub_customer` - –ö–ª–∏–µ–Ω—Ç—ã
- `hub_product` - –¢–æ–≤–∞—Ä—ã
- `hub_order` - –ó–∞–∫–∞–∑—ã

### Links (–°–≤—è–∑–∏)
- `link_order_customer` - –°–≤—è–∑—å –∑–∞–∫–∞–∑–æ–≤ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- `link_order_product` - –°–≤—è–∑—å –∑–∞–∫–∞–∑–æ–≤ —Å —Ç–æ–≤–∞—Ä–∞–º–∏

### Satellites (–°–∞—Ç–µ–ª–ª–∏—Ç—ã)
- `sat_customer` - –ê—Ç—Ä–∏–±—É—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
- `sat_product` - –ê—Ç—Ä–∏–±—É—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤
- `sat_order` - –ê—Ç—Ä–∏–±—É—Ç—ã –∑–∞–∫–∞–∑–æ–≤
- `sat_order_product` - –ê—Ç—Ä–∏–±—É—Ç—ã –ø–æ–∑–∏—Ü–∏–π –∑–∞–∫–∞–∑–æ–≤

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Greenplum Database 6.x –∏–ª–∏ –≤—ã—à–µ
- –ü—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º –∏ —Ç–∞–±–ª–∏—Ü

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Greenplum:
```bash
psql -h your_host -U your_user -d your_database
```

2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ DDL —Å–∫—Ä–∏–ø—Ç:
```bash
psql -h your_host -U your_user -d your_database -f greenplum_ddl.sql
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:
- –°—Ö–µ–º—É `dv`
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤:**
```sql
SELECT * FROM dv.v_current_customers;
```

**–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–∞–∑–∞—Ö:**
```sql
SELECT * FROM dv.v_current_orders 
WHERE order_date >= CURRENT_DATE - INTERVAL '30 days';
```

**–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞:**
```sql
SELECT * FROM dv.v_order_details 
WHERE order_id = 'ORD-12345';
```

### –í—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ö–µ—à–∞:
```sql
-- –í—Å—Ç–∞–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
INSERT INTO dv.hub_customer (hub_customer_id, customer_id, load_date, record_source)
VALUES (
    dv.generate_hash_key('CUST-001'),
    'CUST-001',
    CURRENT_TIMESTAMP,
    'SOURCE_SYSTEM'
);
```

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ò—Å—Ç–æ—Ä–∏—á–Ω–æ—Å—Ç—å** - –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–ª—é—á–∞–º –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. **–ê—É–¥–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏—Å—Ç–æ—á–Ω–∏–∫–µ –∏ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏
4. **–ì–∏–±–∫–æ—Å—Ç—å** - –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª–µ `data_vault_design.md`, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç:
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã
- –î–∏–∞–≥—Ä–∞–º–º—ã —Å–≤—è–∑–µ–π
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–°–£–ë–î**: Greenplum Database
- **–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è**: Data Vault 2.0
- **–Ø–∑—ã–∫**: SQL (PostgreSQL/Greenplum dialect)

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö.